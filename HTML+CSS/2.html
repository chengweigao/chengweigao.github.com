<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width,height=device-height, user-scalable=no,initial-scale=1, minimum-scale=1, maximum-scale=1,target-densitydpi=device-dpi ">
    <title>Document</title>
</head>
<body>

<div>
    <div style="border: 1px solid;padding-top: 10px; text-align: center">
        <canvas id="myChartFive" width="320" height="210">111</canvas>

    </div>
</div>


<script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.js"></script>
<script>



    aNmForSjPH = function () {
        this.canheight = 30;//px;
        this.Twidth = 30;
        this.allWidth = 320;
//        this.padding = (this.allWidth - this.Twidth * 11) / 2;
        this.padding = 25;
        this.allHeight = 200;
        this.paddingHeight = 10;
        this.MiddelNumber = 0;
        this.ctx = '';
        this.step = 10;
        this.minNumber = -3;
        this.maxNumber = 3;
        this.data = {};
        /*设置画布*/
        this.doC = (function (canvasId, data) {
            this.Canvas = document.getElementById(canvasId);
            this.ctx = this.Canvas.getContext('2d');
            this.ctx.fillStyle = "#fffff1";
            this.ctx.fillRect(0, 0, this.allWidth, this.allHeight + this.paddingHeight);
            this.ctx.fillStyle = "black";
            this.ctx.fillRect(this.padding, 0 + this.paddingHeight, this.allWidth - this.padding * 2, this.allHeight - this.paddingHeight * 2);
            this.mkline();
//            this.data = data;
            this.canvasId = canvasId;
            this.makejzhunLin();
          //  this.mkRect();

        });
        /*画线的布局*/
        this.mkline = (function () {
            for (var i = 0; i < 10; i++) {
                /*竖格虚线*/
                this.ctx.strokeStyle = '#ffffff';

                this.ctx.setLineDash([1, 2]);

                this.ctx.lineDashOffset = 1;
                this.ctx.beginPath();
                this.ctx.lineWidth = 0.3;
//              起始点
                this.ctx.moveTo((this.Twidth) * i + this.padding, 0);
//              画到位置
                this.ctx.lineTo((this.Twidth) * i + this.padding, this.allHeight - this.paddingHeight);
                this.ctx.stroke();
                this.ctx.closePath();
                /*写小刻度*/
//                if (!(i < 0 || i > 5)) {
//                    for (var j = 0; j <= this.step; j++) {
//                        if (j == this.step || j == 0) {
//                            add = 0;
//                        } else {
//                            add = 4
//                        }
//                        this.ctx.beginPath();
//                        this.ctx.setLineDash([]);
//                        this.ctx.strokeStyle = 'red';
//                        this.ctx.lineWidth = 0.1;
//                        this.ctx.moveTo((this.Twidth) * i + this.padding + this.Twidth / this.step * j, 180);
//                        this.ctx.lineTo((this.Twidth) * i + this.padding + this.Twidth / this.step * j, 190 - add);
//                        this.ctx.stroke();
//                        this.ctx.closePath();
//                    }
//                }


                /*刻度数字书写*/
                this.ctx.fillStyle = 'green';


                if (i < 10) {
                    this.ctx.fillText(i * 10 + 10, (this.Twidth) * i - 5 + this.padding, 195 + this.paddingHeight);
                }


            }
            this.ctx.beginPath();
            this.ctx.setLineDash([]);
            this.ctx.lineDashOffset = 0;
            this.ctx.strokeStyle = 'green';
            this.ctx.lineWidth = 0.8;
            this.ctx.moveTo(this.padding, this.allHeight - 10);
            this.ctx.lineTo(this.allWidth - this.padding, this.allHeight - 10);
            this.ctx.stroke();
            this.canheight = (this.allHeight - this.paddingHeight * 2) / 6;
            this.heightSvg= this.canheight/this.step;
            this.ctx.closePath();
            /*横格虚线*/
            for (var i = 0; i < 6; i++) {

                this.ctx.strokeStyle = '#ffffff';

                this.ctx.setLineDash([1, 3]);
                this.ctx.lineDashOffset = 0.5;
                this.ctx.beginPath();
                if (i == 3) {
                    this.ctx.strokeStyle = '#ffffff';

                    this.ctx.setLineDash([]);
                    this.ctx.lineDashOffset = 0.5;
                }
                this.ctx.lineWidth = 1;
                this.ctx.moveTo(0 + this.padding - 10, (this.canheight) * i + this.paddingHeight);
                this.ctx.lineTo(this.allWidth - 1 - this.padding + 10, (this.canheight) * i + this.paddingHeight);
                this.ctx.stroke();
                this.ctx.closePath();


                this.ctx.fillText(40 - (i * 10 + 10), 0, (this.canheight) * i + this.paddingHeight + 5);


            }
            this.ctx.fillText('-30', 0, this.allHeight - this.paddingHeight + 5);

            /*8条斜线*/
            this.ctx.beginPath();
            this.ctx.strokeStyle = '#ffffff';
            this.ctx.setLineDash([]);
//                this.ctx.lineDashOffset = 0.5;
            this.ctx.lineWidth = 1;
            this.ctx.moveTo(this.padding, this.paddingHeight + this.canheight * 3 + this.canheight / 10 * 7);
            this.ctx.lineTo(this.padding + this.Twidth * 4 - this.Twidth / 10 * 7, this.paddingHeight);
            this.ctx.fillStyle = 'red';
            this.ctx.fillText('7.7', this.padding + this.Twidth * 4 - this.Twidth / 10 * 7, this.paddingHeight + 15);


            this.ctx.moveTo(this.padding, this.paddingHeight + this.canheight * 4 + this.canheight / 10);
            this.ctx.lineTo(this.padding + this.Twidth * 4 + this.Twidth / 10 * 6, this.paddingHeight);
            this.ctx.fillText('7.6', this.padding + this.Twidth * 4 + this.Twidth / 10 *6, this.paddingHeight + 15);

            this.ctx.moveTo(this.padding, this.paddingHeight + this.canheight * 4 + this.canheight / 10 * 4);
            this.ctx.lineTo(this.padding + this.Twidth * 6 + this.Twidth / 10 * 3, this.paddingHeight);
            this.ctx.fillText('7.5', this.padding + this.Twidth * 6 + this.Twidth / 10 * 3, this.paddingHeight + 15);


            this.ctx.moveTo(this.padding, this.paddingHeight + this.canheight * 4 + this.canheight / 10 * 7);
            this.ctx.lineTo(this.padding + this.Twidth * 9 - this.Twidth / 10 * 6, this.paddingHeight);
            this.ctx.fillText('7.4', this.padding + this.Twidth * 9 - this.Twidth / 10 * 6, this.paddingHeight + 15);

            this.ctx.moveTo(this.padding, this.paddingHeight + this.canheight * 5);
            this.ctx.lineTo(this.padding + this.Twidth * 9, this.paddingHeight + this.canheight * 1 - this.canheight / 10);
            this.ctx.fillText('7.3', this.padding + this.Twidth * 9 - 20, this.paddingHeight + this.canheight * 1 - this.canheight / 10 + 20);

            this.ctx.moveTo(this.padding, this.paddingHeight + this.canheight * 5 + this.canheight / 10 * 2);
            this.ctx.lineTo(this.padding + this.Twidth * 9, this.paddingHeight + this.canheight * 2);
            this.ctx.fillText('7.2', this.padding + this.Twidth * 9 - 20, this.paddingHeight + this.canheight * 2 + 20);

            this.ctx.moveTo(this.padding, this.paddingHeight + this.canheight * 5 + this.canheight / 10 * 4);
            this.ctx.lineTo(this.padding + this.Twidth * 9, this.paddingHeight + this.canheight * 2 + this.canheight / 10 * 8);
            this.ctx.fillText('7.1', this.padding + this.Twidth * 9 - 20, this.paddingHeight + this.canheight * 2 + this.canheight / 10 * 8 + 20);

            this.ctx.moveTo(this.padding, this.paddingHeight + this.canheight * 5 + this.canheight / 10 * 6);
            this.ctx.lineTo(this.padding + this.Twidth * 9, this.paddingHeight + this.canheight * 3 + this.canheight / 10 * 6);
            this.ctx.fillText('7.0', this.padding + this.Twidth * 9 - 20, this.paddingHeight + this.canheight * 3 + this.canheight / 10 * 4 + 20);
            this.ctx.stroke();
            this.ctx.closePath();

        });



//        创建小的每条元素对象 用来做鼠标经过提示


        /*画标准线*/
        this.makejzhunLin = (function () {

//
//            this.ctx.strokeStyle = 'red';
//            this.ctx.setLineDash([]);
//            this.ctx.beginPath();
//            this.ctx.lineWidth = 1;
//            this.ctx.moveTo((this.Twidth / this.step) * this.data.max + this.padding + (this.Twidth * 3), 0);
//            this.ctx.lineTo((this.Twidth / this.step) * this.data.max + this.padding + (this.Twidth * 3), this.allHeight - 10);
//            this.makeSonDocument('max', (this.Twidth / this.step) * this.data.max + this.padding + (this.Twidth * 3), 0, 0.1, this.allHeight - 10, "标准上限[" + this.data.max + ']', 1);
//            this.ctx.moveTo((this.Twidth / this.step) * this.data.min + this.padding + (this.Twidth * 3), 0);
//            this.ctx.lineTo((this.Twidth / this.step) * this.data.min + this.padding + (this.Twidth * 3), this.allHeight - 10);
//            this.makeSonDocument('min', (this.Twidth / this.step) * this.data.min + this.padding + (this.Twidth * 3), 0, 0.1, this.allHeight - 10, "标准下限[" + this.data.min + ']', 1);
//            this.ctx.stroke();
//            this.ctx.closePath();


            this.ctx.beginPath();
            this.ctx.setLineDash([]);
            this.ctx.lineDashOffset = 0;
            this.ctx.strokeStyle = 'red';
            this.ctx.lineWidth =2.0;
         //   this.ctx.fillRect((this.Twidth/10)*32+this.padding,(this.canheight/10)*28+this.paddingHeight,(this.Twidth/10)*8,this.canheight/10*4);
            this.ctx.stroke();
            this.ctx.strokeRect((this.Twidth/10)*32+this.padding,(this.canheight/10)*28+this.paddingHeight,(this.Twidth/10)*8,this.canheight/10*4);
            this.ctx.closePath();


        });
        this.makeTheCircleCenter=(function(x,y,i,r,rr){
          cheight=this.paddingHeight+this.canheight/10*(60+(-30-x));
          cwidth=this.padding+this.canheight/10*(y);
            console.log(cheight,cwidth);
            this.ctx.beginPath();
            this.ctx.setLineDash([]);
            this.ctx.lineDashOffset = 0;
            this.ctx.strokeStyle = '#ffffff';
            this.ctx.lineWidth = 1;
            this.ctx.moveTo(cwidth,cheight-20);
            this.ctx.lineTo(cwidth,cheight+20);
            this.ctx.moveTo(cwidth-20,cheight);
            this.ctx.lineTo(cwidth+20,cheight);
            this.ctx.fillStyle="rgb(255,0,0)";   //设置填充的颜色
            this.ctx.arc(cwidth,cheight,i,0,360,false);
            this.ctx.arc(cwidth,cheight,r,0,360,false);
            this.ctx.fill();
            this.ctx.stroke();
            this.ctx.closePath();

            this.ctx.beginPath();
            this.ctx.lineWidth=1;    //重新设置画笔
            this.ctx.strokeStyle="#ffffff";
            this.ctx.arc(cwidth,cheight,rr,0,360,false);
            this.ctx.stroke();
            this.ctx.closePath();
        });
    }
    Anm = new aNmForSjPH;
    Anm.doC('myChartFive');
    Anm.makeTheCircleCenter(-7,24.5,2,7,15);

    //     function getL(canvasId, evt) {
    //        var rect = document.getElementById(canvasId).getBoundingClientRect();
    //        return {
    //            x: evt.clientX - rect.left,
    //            y: evt.clientY - rect.top
    //        };
    //    };
</script>

</body>
</html>